<html>
<body>

<div>
    <video controls width="300" >
        <source src="1.mp4" type="video/mp4"></source>
    </video>
    <canvas class="canvas" width="100" height="100" style="display: none"></canvas>
    <img class="img_snap" style="width:300px;" />
</div>

<div>
    <video controls width="300" >
        <source src="2.mp4" type="video/mp4"></source>
    </video>
    <canvas class="canvas" width="100" height="100" style="display: none"></canvas>
    <img class="img_snap" style="width:300px;" />
</div>
<div>
    <video controls width="300" >
        <source src="2.mp4" type="video/mp4"></source>
    </video>
    <canvas class="canvas" width="100" height="100" style="display: none"></canvas>
    <img class="img_snap" style="width:300px;" />
</div>



<!-- start the script ... within that declare variables as follows... -->
<script>
    var videoes=document.querySelectorAll('video');
    var images=document.querySelectorAll(".img_snap");
    var w,h,ratio;
    for (i = 0; i < videoes.length; i++) {

        video=document.querySelectorAll('video')[i];
        canvas=document.querySelectorAll('canvas')[i];
        context=canvas.getContext('2d');
        imageElemant=images[i];
        video.addEventListener('loadedmetadata', function() {
            ratio = video.videoWidth/video.videoHeight;
            video.currentTime =20;
            w = video.videoWidth-100;
            h = parseInt(w/ratio,10);
            canvas.width = w;
            canvas.height = h;

            setTimeout(function () {
                context.fillRect(0,0,w,h);
                context.drawImage(video,0,0,w,h);
                console.log(canvas.toDataURL())
                imageElemant.setAttribute("src", canvas.toDataURL());
            },500);
        },false) ;

    }





</script>

</body>
</html>